---
title: 词法分析之NFA, DFA, Min-DFA与RE, RG
date: 2022-03-02 23:52
category:
- 编译原理
- 自动机理论
tags:
- 词法分析
- Finite State Automata
---

> Computation with automata.

<!-- more -->

## Glossary

- NFA: Non-Deterministic Finite Automata 非确定性的有限状态自动机
  - 对于NFA的非确定, 有两种有趣的解释
    1. 在需要做出不确定选择的时候, NFA会复制自己并执行所有的操作, 如果最终有任何一台自动机到达了接收状态, 那么NFA接收这个输入
    2. 在需要做出不确定选择的时候, NFA的选择总是正确, 也就是说, 只要这个串是能被接收的, 那NFA一定能选对
- DFA: Deterministic Finite Automata 确定性的有限状态自动机
- Min-DFA: Minimal Deterministic Finite Automata 最小的DFA
- RE: Regular Expression 正则表达式
- RG: Regular Grammar 正则文法

## NFA,DFA,Min-DFA,RE的关系

一般地，认为NFA, DFA, Min-DFA, RE的关系如下


```mermaid
graph LR
A[NFA]
B[DFA]
D[RE]
E([code for a scanner])
A--Subset Construction-->B--Kleene's Construction-->D--Thompson's Construction-->A
B--DFA Minimization-->B
A-->E
D--Direct method-->B
```

DFA Minimization有两种算法: Brzozowski, Hopcroft.

## RE to NFA: Thompson Construction

先看正则表达式的结构, 这里就不那么形式化了, 用Haskell的语法写了=_=

```haskell
data RegExp
	= Symbol Char          -- Basic Character a
	| Concat RegExp RegExp -- Concatenation   ab
	| Union  RegExp RegExp -- Union           a+b
	| Star   RegExp        -- Kleene star     a*
```

- 当`RegExp`是`Symbol a`时

  ```mermaid
  stateDiagram-v2
  	direction LR
  	s0
  	s1
  	[*]-->s0
  	s0-->s1:a
  	s1-->[*]
  ```

  

- 当`RegExp`是`Concat e1 e2`时

  ```mermaid
  stateDiagram-v2
  	direction LR
  	%% e1-->e2:ε
  	s1-->s3:ε
  	state e1{
  		direction LR
  		[*]-->s0
  		s0-->s1
  	}
  	state e2{
  		direction LR
  		s3-->s4
  		s4-->[*]
  	}
  ```

  

- 当`RegExp`是`Union e1 e2`时

  ```mermaid
  stateDiagram-v2
  	direction LR
  	[*]-->s0
  	s0-->s1:ε
  	s0-->s3:ε
  	s2-->s5:ε
  	s4-->s5:ε
  	s5-->[*]
  	state e1{
  		direction LR
  			s1-->s2
  	}
  	state e2{
  		direction LR
  			s3-->s4
  	}
  ```

  

- 当`RegExp`是`Star e`时

  ```mermaid
  stateDiagram-v2
  	direction LR
  	[*]-->s0
  	s0-->s1:ε
  	
  	s2-->s3:ε
  	s3-->[*]
  	state e{
  		direction LR
  		s1-->s2
  		s2-->s1:ε
  	}
  ```

  

## NFA to DFA: 子集构造法

 

## DFA to Minimal DFA

### Brzozowski’s algorithm

### Hopcroft’s algorithm

## DFA to RE: Kle

